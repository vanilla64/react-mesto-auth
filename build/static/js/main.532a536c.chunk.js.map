{"version":3,"sources":["images/logo.svg","components/Header.js","contexts/CurrentUserContext.js","components/Card.js","components/Main.js","components/Footer.js","components/PopupWithForm.js","components/EditAvatarPopup.js","components/EditProfilePopup.js","components/AddPlacePopup.js","components/ImagePopup.js","utils/Api.js","components/App.js","index.js"],"names":["Header","className","src","logoPath","alt","CurrentUserContext","React","createContext","Card","props","currentUser","useContext","isOwn","card","owner","_id","isLiked","likes","some","item","cardDeleteButtonClassName","cardLikeButtonClassName","onClick","onCardDelete","onCardClick","link","name","onCardLike","parseInt","Main","onEditAvatar","avatar","about","onEditProfile","onAddPlace","cards","map","key","length","Footer","PopupWithForm","onOverlayClose","isOpen","type","title","onClose","onSubmit","noValidate","children","EditAvatarPopup","avatarRef","useRef","evt","preventDefault","onUpdateAvatar","current","value","id","ref","placeholder","onKeyDown","required","checkValid","EditProfilePopup","useState","setName","description","setDescription","useEffect","onUpdateUser","onChange","target","minLength","maxLength","AddPlacePopup","location","setLocation","setLink","ImagePopup","api","url","token","this","_url","_token","fetch","headers","authorization","then","res","ok","json","Promise","reject","status","isLicked","method","body","JSON","stringify","App","isEditAvatarPopupOpen","setEditAvatarPopupOpen","isEditProfilePopupOpen","setEditProfilePopupOpen","isAddPlacePopupOpen","setAddPlacePopupOpen","selectedCard","setSelectedCard","setCurrentUser","setCards","handleOverlayClose","currentTarget","closeAllPopups","getUserInfo","catch","err","console","log","getInitialCards","handleEscClose","document","addEventListener","removeEventListener","isValid","setIsValid","Provider","changeLikeCardStatus","newCards","updCard","deleteCard","filter","setAvatar","checkValidity","user","setUserInfo","data","createCard","ReactDOM","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.532a536c.chunk.js","sourcesContent":["export default __webpack_public_path__ + \"static/media/logo.a307e1c4.svg\";","import React from 'react'\nimport logoPath from '../images/logo.svg'\n\nfunction Header() {\n  return (\n    <header className=\"header\">\n      <img className=\"header__logo\" src={logoPath} alt=\"Логотип\" />\n    </header>\n  )\n}\n\nexport default Header","import React from 'react'\n\nconst CurrentUserContext = React.createContext()\n\nexport default CurrentUserContext","import React from 'react'\nimport CurrentUserContext from '../contexts/CurrentUserContext'\n\nfunction Card(props) {\n\n  const currentUser = React.useContext(CurrentUserContext)\n  const isOwn = props.card.owner._id === currentUser._id\n  const isLiked = props.card.likes.some(item => item._id === currentUser._id)\n\n  const cardDeleteButtonClassName = \n    `${isOwn ? \n      'element__delete-button' : \n      'element__delete-button element__delete-button_hidden'\n    }`\n  const cardLikeButtonClassName = \n    `${isLiked ? \n      'element__like-button element__like-button_pressed' : \n      'element__like-button'\n    }`\n\n  function handleClick() {\n    props.onCardClick(props.card)\n  }\n\n  function handleLikeClick() {\n    props.onCardLike(props.card)\n  }\n\n  function handleDeleteClick() {\n    props.onCardDelete(props.card)\n  }\n\n  return (\n    <li className=\"element\">\n      <button onClick={handleDeleteClick} className={cardDeleteButtonClassName}></button>\n      <img onClick={handleClick} className=\"element__image\" src={props.link} alt={props.name} />\n      <div className=\"element__heading\">\n        <h2 className=\"element__title\">{props.name}</h2>\n        <div className=\"element__like-container\">\n          <button onClick={handleLikeClick} className={cardLikeButtonClassName}></button>\n          <span className=\"element__like-counter\">{parseInt(props.likes)}</span>\n        </div>\n      </div>\n    </li>\n  )\n}\n\nexport default Card","import React from 'react'\nimport Card from '../components/Card'\nimport CurrentUserContext from '../contexts/CurrentUserContext'\n\nfunction Main(props) {\n\n  const currentUser = React.useContext(CurrentUserContext)\n\n  return (\n    <main className=\"content\">\n      <section className=\"profile\">\n        <div className=\"profile__avatar\" \n          onClick={props.onEditAvatar}>\n          <img className=\"profile__img\" src={currentUser.avatar} alt=\"Аватар\" />\n        </div>\n        <div className=\"profile__user-info\">\n          <h1 className=\"profile__title\">{currentUser.name}</h1>\n          <p className=\"profile__subtitle\">{currentUser.about}</p>\n        </div>\n        <button className=\"profile__edit-button\"\n          onClick={props.onEditProfile}></button>\n        <div className=\"profile__container\">\n          <button className=\"profile__add-button\" \n            onClick={props.onAddPlace}></button>\n        </div>\n      </section>\n\n      <section className=\"elements\">\n        <ul className=\"elements__list\">\n          {\n            props.cards.map((card) => (\n              <Card \n                key={card._id}\n                link={card.link}\n                name={card.name}\n                likes={card.likes.length}\n                card={card}\n                onCardClick={props.onCardClick}\n                onCardLike={props.onCardLike}\n                onCardDelete={props.onCardDelete}\n              />\n            ))\n          }\n        </ul>\n      </section>\n    </main>\n  )\n}\n\nexport default Main ","import React from 'react'\n\nfunction Footer() {\n  return (\n    <footer className=\"footer\">\n      <p className=\"footer__copyright\">&copy; 2020 Mesto Russia</p>\n    </footer>\n  )\n}\n\nexport default Footer","import React from 'react'\n\nfunction PopupWithForm(props) {\n  return (\n    <section onClick={props.onOverlayClose} className={props.isOpen ? `popup popup_type_${props.name} popup_opened` : `popup popup_type_${props.name}`}>  \n      <div  className={`popup__container popup__container_type_${props.type}`}>\n        <h2 className=\"popup__title\"> {props.title} </h2>\n        <div className=\"popup__close-btn\" onClick={props.onClose}></div>\n        <form onSubmit={props.onSubmit} name={`${props.name}`} className=\"popup__form\" noValidate>\n          {props.children}\n        </form>\n      </div>\n    </section>\n  )\n}\n\nexport default PopupWithForm","import React from 'react'\nimport PopupWithForm from './PopupWithForm'\n\nfunction EditAvatarPopup(props) {\n\n  const avatarRef = React.useRef()\n\n  function handleSubmit(evt) {\n    evt.preventDefault()\n\n    props.onUpdateAvatar({\n      avatar: avatarRef.current.value,\n    })\n  }\n\n  return (\n    <PopupWithForm\n      name='avatar-upd'\n      title='Обновить аватар'\n      type='confirm'\n      isOpen={props.isOpen}\n      onClose={props.onClose}\n      onSubmit={handleSubmit}\n      onOverlayClose={props.onOverlayClose}\n    >\n\n      <>\n        <label className=\"popup__label\">\n          <input \n            id=\"link-input-avatar\" \n            name=\"linkavatar\" \n            ref={avatarRef} \n            className=\"popup__input popup__input_text_link\" \n            type=\"url\"\n            placeholder=\"Ссылка на картинку\" \n            onKeyDown={props.onKeyDown}\n            required />\n          <span \n            id=\"link-input-avatar-error\" \n            className={props.checkValid ? \n            `popup__error` : \n            `popup__error popup__error_visible`}>Error</span>\n        </label>\n        <button className=\"popup__btn\" type=\"submit\">Сохранить</button>\n      </>\n    </PopupWithForm>\n  )\n}\n\nexport default EditAvatarPopup","import React from 'react'\nimport PopupWithForm from './PopupWithForm'\nimport CurrentUserContext from '../contexts/CurrentUserContext'\n\nfunction EditProfilePopup(props) {\n  const [name, setName] = React.useState('')\n  const [description, setDescription] = React.useState('')\n\n  const currentUser = React.useContext(CurrentUserContext)\n  \n  React.useEffect(() => {\n    setName(currentUser.name)\n    setDescription(currentUser.about)\n  }, [currentUser])\n\n  function handleChangeName(evt) {\n    setName(evt.target.value)\n  }\n\n  function handleChangeDescription(evt) {\n    setDescription(evt.target.value)\n  }\n\n  function handleSubmit(evt) {\n    evt.preventDefault()\n\n    props.onUpdateUser({\n      name,\n      about: description,\n    })\n  }\n\n  return (\n    <PopupWithForm\n      name='edit-profile'\n      title='Редактировать профиль'\n      type='form'\n      isOpen={props.isOpen}\n      onClose={props.onClose}\n      onSubmit={handleSubmit}\n      onOverlayClose={props.onOverlayClose}\n    >\n\n      <>\n        <label className=\"popup__label\">\n          <input \n            id=\"name-input\" \n            value={name ? name : ''} \n            onChange={handleChangeName}\n            name=\"name\" \n            className=\"popup__input popup__input_text_name\"\n            type=\"text\"\n            placeholder=\"Имя\"\n            required\n            minLength=\"2\"\n            maxLength=\"40\" />\n          <span id=\"name-input-error\" className=\"popup__error\"></span>\n        </label>\n        <label className=\"popup__label\">\n          <input \n            id=\"job-input\" \n            value={description ? description : ''}\n            onChange={handleChangeDescription}\n            name=\"job\" \n            className=\"popup__input popup__input_text_job\" type=\"text\"\n            placeholder=\"О себе\"\n            required\n            minLength=\"2\"\n            maxLength=\"200\" />\n          <span id=\"job-input-error\" className=\"popup__error\"></span>\n        </label>\n        <button className=\"popup__btn\" type=\"submit\">Сохранить</button>\n      </>\n\n    </PopupWithForm>\n  )\n}\n\nexport default EditProfilePopup","import React from 'react'\nimport PopupWithForm from './PopupWithForm'\n\nfunction AddPlacePopup(props) {\n  const [location, setLocation] = React.useState('')\n  const [link, setLink] = React.useState('')\n  \n  function handleChangeLocation(evt) {\n    setLocation(evt.target.value)\n  }\n\n  function handleChangeLink(evt) {\n    setLink(evt.target.value)\n  }\n\n  function handleSubmit(evt) {\n    evt.preventDefault()\n\n    props.onAddPlace({\n      location,\n      link,\n    })\n  }\n\n  return (\n    <PopupWithForm\n      name='add-card'\n      title='Новое место'\n      type='form'\n      isOpen={props.isOpen}\n      onClose={props.onClose}\n      onSubmit={handleSubmit}\n      onOverlayClose={props.onOverlayClose}\n    >\n      <>\n        <label className=\"popup__label\">\n          <input \n            id=\"location-input\" \n            value={location ? location : ''}\n            onChange={handleChangeLocation}\n            name=\"location\" \n            className=\"popup__input popup__input_text_location\"\n            type=\"text\"\n            placeholder=\"Название\"\n            required\n            minLength=\"2\"\n            maxLength=\"30\" />\n          <span id=\"location-input-error\" className=\"popup__error\"></span>\n        </label>\n        <label className=\"popup__label\">\n          <input \n            id=\"link-input\" \n            value={link ? link : ''}\n            onChange={handleChangeLink}\n            name=\"link\" \n            className=\"popup__input popup__input_text_link\"\n            type=\"url\"\n            placeholder=\"Ссылка на картинку\"\n            required />\n          <span id=\"link-input-error\" className=\"popup__error\"></span>\n        </label>\n        <button className=\"popup__btn\" type=\"submit\">Создать</button>\n      </>\n    </PopupWithForm>\n  )\n}\n\nexport default AddPlacePopup","import React from 'react'\n\nfunction ImagePopup(props) {\n  return (\n    <section onClick={props.onOverlayClose} className={props.card ? `popup popup_type_photo popup_opened` : `popup popup_type_photo`}>\n      <figure className=\"popup__container popup__container_type_photo\">\n        <div className=\"popup__close-btn\" onClick={props.onClose}></div>\n        <img className=\"popup__image\" src={props.card ? props.card.link : '#'} alt={props.card ? props.card.name : ''} />\n        <figcaption className=\"popup__description\">{props.card ? props.card.name : ''}</figcaption>\n      </figure>\n    </section>\n  )\n}\n\nexport default ImagePopup","// import React from 'react'\n\nexport class Api {\n  constructor({ url, token}) {\n    this._url = url\n    this._token = token\n  }\n\n  getInitialCards() {\n    return fetch(`${this._url}${'/cards'}`, {\n      headers: {\n        authorization: this._token\n      }\n    })\n    .then((res) => {\n      if (res.ok) {\n        return res.json()\n      }\n      return Promise.reject(`Ошибка: ${res.status}`)\n    })\n  }\n\n  changeLikeCardStatus(id, isLicked) {\n    if (!isLicked) {\n      return fetch(`${this._url}${'/cards/likes'}/${id}`, {\n        method: 'PUT',\n        headers: {\n          authorization: this._token,\n          'Content-Type': 'application/json'\n        }\n      })\n      .then((res) => {\n        if (res.ok) {\n          return res.json()\n        }\n        return Promise.reject(`Ошибка: ${res.status}`)\n      })\n    } else if (isLicked) {\n      return fetch(`${this._url}${'/cards/likes'}/${id}`, {\n        method: 'DELETE',\n        headers: {\n          authorization: this._token,\n          'Content-Type': 'application/json'\n        }\n      })\n      .then((res) => {\n        if (res.ok) {\n          return res.json()\n        }\n        return Promise.reject(`Ошибка: ${res.status}`)\n      })\n    }\n  }\n  \n  getUserInfo() {\n    return fetch(`${this._url}${'/users/me'}`, {\n      headers: {\n        authorization: this._token\n      }\n    })\n    .then((res) => {\n      if (res.ok) {\n        return res.json()\n      }\n      return Promise.reject(`Ошибка: ${res.status}`)\n    })\n  }\n\n  setUserInfo(name, about) {\n    return fetch(`${this._url}${'/users/me'}`, {\n      method: 'PATCH',\n      headers: {\n        authorization: this._token,\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify({\n        name: name,\n        about: about\n      })\n    })\n    .then((res) => {\n      if (res.ok) {\n        return res\n      }\n      return Promise.reject(`Ошибка: ${res.status}`)\n    })\n  }\n\n  setAvatar(avatar) {\n    return fetch(`${this._url}${'/users/me/avatar'}`, {\n      method: 'PATCH',\n      headers: {\n        authorization: this._token,\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify({\n        avatar: avatar\n      })\n    })\n    .then((res) => {\n      if (res.ok) {\n        return res\n      }\n      return Promise.reject(`Ошибка: ${res.status}`)\n    })\n  }\n\n  createCard(name, link) {\n    return fetch(`${this._url}${'/cards'}`, {\n      method: 'POST',\n      headers: {\n        authorization: this._token,\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify({\n        name: name,\n        link: link\n      })\n    })\n    .then((res) => {\n      if (res.ok) {\n        return res.json()\n      }\n      return Promise.reject(`Ошибка: ${res.status}`)\n    })  \n  }\n\n  deleteCard(id) {\n    return fetch(`${this._url}${'/cards'}/${id}`, {\n      method: 'DELETE',\n      headers: {\n        authorization: this._token,\n        'Content-Type': 'application/json'\n      }\n    })\n    .then((res) => {\n      if (res.ok) {\n        return res.json()\n      }\n      return Promise.reject(`Ошибка: ${res.status}`)\n    })\n  }\n}\n\nconst api = new Api({\n  url: 'https://mesto.nomoreparties.co/v1/cohort-14', \n  token: '3afbb2b4-9ecc-4aaa-9813-505ad2c004fc'\n})\n\nexport default api","import React from 'react'\nimport Header from '../components/Header'\nimport Main from '../components/Main'\nimport Footer from '../components/Footer'\nimport PopupWithForm from '../components/PopupWithForm'\nimport EditAvatarPopup from '../components/EditAvatarPopup'\nimport EditProfilePopup from '../components/EditProfilePopup'\nimport AddPlacePopup from '../components/AddPlacePopup'\nimport ImagePopup from '../components/ImagePopup'\nimport api from '../utils/Api'\nimport CurrentUserContext from '../contexts/CurrentUserContext'\n\nfunction App() {\n\n  const [isEditAvatarPopupOpen, setEditAvatarPopupOpen] = React.useState(false)\n  const [isEditProfilePopupOpen, setEditProfilePopupOpen] = React.useState(false)\n  const [isAddPlacePopupOpen, setAddPlacePopupOpen] = React.useState(false)\n  const [selectedCard, setSelectedCard] = React.useState(null)\n  const [currentUser, setCurrentUser] = React.useState({})\n  const [cards, setCards] = React.useState([])\n\n  React.useEffect(() => {\n    api.getUserInfo().then((res) => {\n      setCurrentUser(res)\n    }).catch((err) => {console.log(err)})\n  }, [])\n\n  React.useEffect(() => {\n    api.getInitialCards()\n      .then((res) => {\n      setCards(res)\n      }).catch((err) => {console.log(err)})\n  }, [])\n\n  React.useEffect(() => {\n    function handleEscClose(evt) {\n      if (evt.key === 'Escape') {\n        closeAllPopups()\n      }\n    }\n\n    document.addEventListener('keydown', handleEscClose)\n    // document.addEventListener('click', handleOverlayClose)\n    return () => {\n      document.removeEventListener('keydown', handleEscClose)\n      // document.removeEventListener('click', handleEscClose)\n    }\n  }, [])\n\n  function handleOverlayClose(evt) {\n    if (evt.target === evt.currentTarget) {\n      closeAllPopups()\n    }\n  }\n\n//////////// NEW FEATURE\n  const [isValid, setIsValid] = React.useState(true)\n\n  function handleKeydown(evt) {\n    setIsValid(evt.target.checkValidity())\n    console.log(evt.target.value)\n  }\n\n  function handleCardLike(card) {\n    const isLiked = card.likes.some(item => item._id === currentUser._id)\n\n    api.changeLikeCardStatus(card._id, isLiked).then((res) => {\n      const newCards = cards.map(\n        (updCard) => updCard._id === card._id ? res : updCard)\n\n      setCards(newCards)\n    }).catch((err) => {console.log(err)})\n  }\n\n  function handleCardDelete(card) {\n    api.deleteCard(card._id)\n    .then(() => {\n      const newCards = cards.filter(item => item._id !== card._id)\n      setCards(newCards)\n      api.getInitialCards().then((res) => {\n        setCards(res)\n      }).catch((err) => {console.log(err)})\n    }).catch((err) => {console.log(err)})\n  }\n\n  function handleEditAvatarClick() {\n    setEditAvatarPopupOpen(true)\n  }\n\n  function handleEditProfileClick() {\n    setEditProfilePopupOpen(true)\n  }\n\n  function handleAddPlaceClick() {\n    setAddPlacePopupOpen(true)\n  }\n\n  function handleCardClick(card) {\n    setSelectedCard(card)\n  }\n\n\n  function handleUpdateUser(user) {\n    api.setUserInfo(user.name, user.about)\n      .then(() => {\n        api.getUserInfo().then((res) => {\n          setCurrentUser(res)\n          closeAllPopups()\n        }).catch((err) => {console.log(err)})\n      }).catch((err) => {console.log(err)})\n  }\n\n  function handleUpdateAvatar(url) {\n    api.setAvatar(url.avatar)\n      .then(() => {\n        api.getUserInfo()\n          .then((res) => {\n            setCurrentUser(res)\n            closeAllPopups()\n          }).catch((err) => {console.log(err)})\n      }).catch((err) => {console.log(err)})\n  }\n\n  function handleAddPlaceSubmit(data) {\n    api.createCard(data.location, data.link)\n      .then((res) => {\n        setCards([...cards, res])\n        api.getInitialCards().then((res) => {\n          setCards(res)\n        }).catch((err) => {console.log(err)})\n\n        closeAllPopups()\n      }).catch((err) => {console.log(err)})\n  }\n\n  function closeAllPopups() {\n    setEditAvatarPopupOpen(false)\n    setEditProfilePopupOpen(false)\n    setAddPlacePopupOpen(false)\n    setSelectedCard(null)\n  }\n\n  return (\n    <div className=\"page\">\n      <CurrentUserContext.Provider value={currentUser}>\n        <Header />\n        <Main  \n          onEditAvatar={handleEditAvatarClick}\n          onEditProfile={handleEditProfileClick}\n          onAddPlace={handleAddPlaceClick}\n          cards={cards}\n          onCardClick={handleCardClick}\n          onCardLike={handleCardLike}\n          onCardDelete={handleCardDelete}\n        />\n        <Footer />\n\n        <EditAvatarPopup \n          isOpen={isEditAvatarPopupOpen} \n          onClose={closeAllPopups}\n          onOverlayClose={handleOverlayClose}\n          onUpdateAvatar={handleUpdateAvatar}\n          onKeyDown={handleKeydown}\n          checkValid={isValid}\n        />\n\n        <EditProfilePopup \n          isOpen={isEditProfilePopupOpen} \n          onClose={closeAllPopups}\n          onOverlayClose={handleOverlayClose}\n          onUpdateUser={handleUpdateUser}\n          />\n\n        <AddPlacePopup \n          isOpen={isAddPlacePopupOpen}\n          onClose={closeAllPopups}\n          onOverlayClose={handleOverlayClose}\n          onAddPlace={handleAddPlaceSubmit}\n        />\n\n        <PopupWithForm\n          name='confirm'\n          title='Вы уверены?'\n          type='confirm'\n          onClose={closeAllPopups}\n        >\n          <>\n            <button className=\"popup__btn popup__btn_type_confirm\" type=\"submit\">Да</button>\n          </>\n        </PopupWithForm>\n\n        <ImagePopup \n          card={selectedCard}\n          onClose={closeAllPopups}\n          onOverlayClose={handleOverlayClose}\n        />\n      </CurrentUserContext.Provider>\n      \n    </div>\n  )\n}\n\nexport default App\n","import React from 'react'\nimport ReactDOM from 'react-dom'\nimport './index.css'\nimport App from './components/App'\n\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n"],"sourceRoot":""}